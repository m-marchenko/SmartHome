
@using SmartHome.Models.DataContracts;
@model List<SensorBase>
@{
    // ViewBag.Title = "Home Page";
    //ViewData["modelId"] = Model[0].Parent.ClientId;
}


<table class="table table-striped">
    <thead>
        <tr>
            <th>Параметр</th>
            <th>Значение</th>
            <th>Время</th>
            <th>&nbsp;</th>
            @*<th><div class="text-right"><a href="#" class="btn btn-xs btn-info" onclick="refreshObject('@Model[0].Parent.ClientId')"><span class="glyphicon glyphicon-refresh"></span></a></div></th>*@
        </tr>
    </thead>
    <tbody>

        @foreach (var d in Model)
        {
            <tr id="@d.ClientId">
                <td>@d.DisplayName</td>
                <td>@d.Value</td>
                <td>
                    <nobr>
                        @if (d.MeasureTime.HasValue)
                        {
                            @d.MeasureTime.Value.ToString("dd.MM HH:mm", new System.Globalization.CultureInfo("ru-RU"));
                        }
                        else
                        {
                            var history = d.History.FirstOrDefault();
                            if (history != null)
                            {
                                @history.MeasureTime.ToString("dd.MM HH:mm", new System.Globalization.CultureInfo("ru-RU"));
                            }
                        }
                    </nobr>
                </td>
                <td>
                    <a href="#" id="@d.HardId" onclick="showHistory('@d.HardId')">
                        <span class="glyphicon glyphicon-signal"></span>
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="modal fade" id="history" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Modal Header</h4>
            </div>
            <div class="modal-body">
                <p>Some text in the modal.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

